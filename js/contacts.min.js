import{b as p}from"./app.min.js";const E=()=>{const t=document.querySelectorAll("textarea[data-fls-input-autoheight]");if(t.length){let o=function(s,e){s.style.height=`${e}px`};t.forEach(s=>{const e=s.hasAttribute("data-fls-input-autoheight-min")?Number(s.dataset.flsInputAutoheightMin):Number(s.offsetHeight),r=s.hasAttribute("data-fls-input-autoheight-max")?Number(s.dataset.flsInputAutoheightMax):1/0;o(s,Math.min(e,r)),s.addEventListener("input",()=>{s.scrollHeight>e&&(s.style.height="auto",o(s,Math.min(Math.max(s.scrollHeight,e),r)))})})}};document.querySelector("textarea[data-fls-input-autoheight]")&&window.addEventListener("load",E);let i={getErrors(t){let o=0,s=t.querySelectorAll("[required]");return s.length&&s.forEach(e=>{(e.offsetParent!==null||e.tagName==="SELECT")&&!e.disabled&&(o+=this.validateInput(e))}),o},validateInput(t){let o=0;return t.type==="email"?(t.value=t.value.replace(" ",""),this.emailTest(t)?(this.addError(t),this.removeSuccess(t),o++):(this.removeError(t),this.addSuccess(t))):t.type==="checkbox"&&!t.checked?(this.addError(t),this.removeSuccess(t),o++):t.value.trim()?(this.removeError(t),this.addSuccess(t)):(this.addError(t),this.removeSuccess(t),o++),o},addError(t){t.classList.add("--form-error"),t.parentElement.classList.add("--form-error");let o=t.parentElement.querySelector("[data-fls-form-error]");o&&t.parentElement.removeChild(o),t.dataset.flsFormErrtext&&t.parentElement.insertAdjacentHTML("beforeend",`<div data-fls-form-error>${t.dataset.flsFormErrtext}</div>`)},removeError(t){t.classList.remove("--form-error"),t.parentElement.classList.remove("--form-error"),t.parentElement.querySelector("[data-fls-form-error]")&&t.parentElement.removeChild(t.parentElement.querySelector("[data-fls-form-error]"))},addSuccess(t){t.classList.add("--form-success"),t.parentElement.classList.add("--form-success")},removeSuccess(t){t.classList.remove("--form-success"),t.parentElement.classList.remove("--form-success")},formClean(t){t.reset(),setTimeout(()=>{let o=t.querySelectorAll("input,textarea");for(let e=0;e<o.length;e++){const r=o[e];r.parentElement.classList.remove("--form-focus"),r.classList.remove("--form-focus"),i.removeError(r)}let s=t.querySelectorAll('input[type="checkbox"]');if(s.length&&s.forEach(e=>{e.checked=!1}),window.flsSelect){let e=t.querySelectorAll("select[data-fls-select]");e.length&&e.forEach(r=>{window.flsSelect.selectBuild(r)})}},0)},emailTest(t){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(t.value)}};function m(){function t(){const s=document.forms;if(s.length)for(const a of s)a.hasAttribute("data-fls-form-novalidate")||a.setAttribute("novalidate",!0),a.addEventListener("submit",function(n){const l=n.target;e(l,n)}),a.addEventListener("reset",function(n){const l=n.target;i.formClean(l)});async function e(a,n){if(i.getErrors(a)===0)if(a.dataset.flsForm==="ajax"){n.preventDefault();const c=a.getAttribute("action")?a.getAttribute("action").trim():"#",f=a.getAttribute("method")?a.getAttribute("method").trim():"GET",d=new FormData(a);a.classList.add("--sending");const u=await fetch(c,{method:f,body:d});if(u.ok){let h=await u.json();a.classList.remove("--sending"),r(a,h)}else a.classList.remove("--sending")}else a.dataset.flsForm==="dev"&&(n.preventDefault(),r(a));else if(n.preventDefault(),a.querySelector(".--form-error")&&a.hasAttribute("data-fls-form-gotoerr")){const c=a.dataset.flsFormGotoerr?a.dataset.flsFormGotoerr:".--form-error";p(c)}}function r(a,n=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:a}})),setTimeout(()=>{if(window.flsPopup){const l=a.dataset.flsFormPopup;l&&window.flsPopup.open(l)}},0),i.formClean(a)}}function o(){document.body.addEventListener("focusin",function(s){const e=s.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(e.hasAttribute("data-fls-form-nofocus")||(e.classList.add("--form-focus"),e.parentElement.classList.add("--form-focus")),e.hasAttribute("data-fls-form-validatenow")&&i.removeError(e))}),document.body.addEventListener("focusout",function(s){const e=s.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(e.hasAttribute("data-fls-form-nofocus")||(e.classList.remove("--form-focus"),e.parentElement.classList.remove("--form-focus")),e.hasAttribute("data-fls-form-validatenow")&&i.validateInput(e))})}t(),o()}document.querySelector("[data-fls-form]")&&window.addEventListener("load",m);
